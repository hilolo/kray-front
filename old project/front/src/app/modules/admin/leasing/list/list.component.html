<div class="absolute inset-0 flex flex-col min-w-0 overflow-hidden">

    <!-- No Permission Message -->
    <div *ngIf="!canViewLeasing" class="flex flex-col items-center justify-center h-full p-8 bg-card dark:bg-transparent">
        <mat-icon class="icon-size-24 text-gray-400 mb-4" [svgIcon]="'heroicons_outline:lock-closed'"></mat-icon>
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-2">Access Denied</h2>
        <p class="text-gray-600 dark:text-gray-400 text-center max-w-md">
            You do not have permission to view leasing information. Please contact your administrator to request access.
        </p>
    </div>

    <div *ngIf="canViewLeasing" class="flex flex-col h-full bg-card dark:bg-transparent">

        <!-- Main -->
        <div class="flex flex-col flex-auto overflow-hidden">
    
    <!-- Header -->
            <div class="flex flex-col py-6 px-6 md:px-8 border-b flex-shrink-0">

                <!-- Title Row -->
                <div class="mb-6">
                    <div class="text-4xl font-extrabold tracking-tight leading-none">Leasing Management</div>
                    <div class="ml-0.5 font-medium text-secondary">
                        <ng-container *ngIf="totalItems === 0">0 Total</ng-container>
                        <ng-container *ngIf="totalItems === 1">1 Total</ng-container>
                        <ng-container *ngIf="totalItems > 1">{{ totalItems }} Total</ng-container>
                    </div>
                </div>
                
                <!-- Search, View Toggle, and Add Button Row -->
                <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4">
                    <!-- Left Side: Search with Clear Filters Button -->
                    <div class="flex items-center gap-2 flex-1 max-w-md">
                        <mat-form-field class="fuse-mat-dense fuse-mat-rounded flex-1" subscriptSizing="dynamic">
                            <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
                            <input matInput [formControl]="searchControl" [autocomplete]="'off'" [placeholder]="'Search leasings...'" />
                        </mat-form-field>
                        
                        <!-- Clear Filters Button -->
                        <button mat-stroked-button color="warn" *ngIf="hasActiveFilters() || searchControl.value"
                            (click)="clearAllFilters(); searchControl.setValue('')"
                            class="min-w-0 hidden sm:flex">
                            <mat-icon class="icon-size-5 mr-2" [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                            <span>Clear Filters</span>
                        </button>
                    </div>

                    <!-- Right Side: View Toggle and Add Button -->
                    <div class="flex items-center gap-4">
                        <!-- View toggle buttons -->
                        <mat-button-toggle-group [value]="viewMode" (change)="toggleViewMode($event.value)">
                            <mat-button-toggle value="list">
                                <mat-icon [svgIcon]="'heroicons_outline:list-bullet'"></mat-icon>
                                <span class="ml-2 hidden sm:inline">List</span>
                            </mat-button-toggle>
                            <mat-button-toggle value="grid">
                                <mat-icon [svgIcon]="'heroicons_outline:squares-2x2'"></mat-icon>
                                <span class="ml-2 hidden sm:inline">Grid</span>
                            </mat-button-toggle>
                        </mat-button-toggle-group>

                        <!-- Add leasing button -->
                        <button *ngIf="canEditLeasing" 
                                mat-flat-button [color]="'primary'" (click)="addLeasing()">
                            <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                            <span class="ml-2 mr-1">Add</span>
                        </button>
                    </div>
                </div>

            </div>

            <!-- Filters Section -->
            <div class="bg-white dark:bg-gray-800 border-b px-6 py-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Property Filter -->
                    <div class="relative">
                        <mat-form-field class="fuse-mat-dense fuse-mat-rounded w-full" subscriptSizing="dynamic">
                            <mat-label>Property</mat-label>
                            <input matInput 
                                   type="text"
                                   [value]="isEditingProperty ? propertySearchTerm : getSelectedPropertyName()"
                                   (input)="onPropertyInput($event)"
                                   (focus)="onPropertyFocus()"
                                   (blur)="onPropertyBlur()"
                                   placeholder="Search properties..."
                                   autocomplete="off">
                            <mat-icon matPrefix class="icon-size-5" [svgIcon]="'heroicons_solid:building-office-2'"></mat-icon>
                            <button mat-icon-button matSuffix *ngIf="selectedPropertyId"
                                    (click)="clearPropertyFilter(); $event.stopPropagation()"
                                    class="icon-size-5">
                                <mat-icon [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                            </button>
                        </mat-form-field>
                        
                        <!-- Property Dropdown -->
                        <div *ngIf="showPropertyDropdown && filteredProperties.length > 0" 
                             class="absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                            <div class="px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-700"
                                 (mousedown)="selectProperty(null)">
                                <div class="font-medium text-gray-900 dark:text-white">All Properties</div>
                            </div>
                            <div *ngFor="let property of filteredProperties" 
                                 class="px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-700 last:border-b-0"
                                 (mousedown)="selectProperty(property.id)">
                                <div class="font-medium text-gray-900 dark:text-white">{{ property.name }}</div>
                                <div class="text-sm text-secondary">{{ property.address }}</div>
                            </div>
                        </div>
                    </div>

                    <!-- Tenant Filter -->
                    <div class="relative">
                        <mat-form-field class="fuse-mat-dense fuse-mat-rounded w-full" subscriptSizing="dynamic">
                            <mat-label>Tenant</mat-label>
                        <input matInput 
                                   type="text"
                                   [value]="isEditingTenant ? tenantSearchTerm : getSelectedTenantName()"
                                   (input)="onTenantInput($event)"
                                   (focus)="onTenantFocus()"
                                   (blur)="onTenantBlur()"
                                   placeholder="Search tenants..."
                                   autocomplete="off">
                            <mat-icon matPrefix class="icon-size-5" [svgIcon]="'heroicons_solid:user'"></mat-icon>
                            <button mat-icon-button matSuffix *ngIf="selectedTenantId"
                                    (click)="clearTenantFilter(); $event.stopPropagation()"
                                    class="icon-size-5">
                                <mat-icon [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
                            </button>
                    </mat-form-field>
                        
                        <!-- Tenant Dropdown -->
                        <div *ngIf="showTenantDropdown && filteredTenants.length > 0" 
                             class="absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                            <div class="px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-700"
                                 (mousedown)="selectTenant(null)">
                                <div class="font-medium text-gray-900 dark:text-white">All Tenants</div>
                            </div>
                            <div *ngFor="let tenant of filteredTenants" 
                                 class="px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-b border-gray-200 dark:border-gray-700 last:border-b-0"
                                 (mousedown)="selectTenant(tenant.id)">
                                <div class="font-medium text-gray-900 dark:text-white">{{ tenant.name }}</div>
                                <div class="text-sm text-secondary flex items-center gap-2">
                                    <span *ngIf="tenant.identifier" class="text-blue-600 dark:text-blue-400">{{ tenant.identifier }}</span>
                                    <span *ngIf="tenant.identifier && tenant.email" class="text-gray-400">•</span>
                                    <span>{{ tenant.email }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- List View -->
            <div *ngIf="viewMode === 'list'" class="flex flex-col flex-auto overflow-hidden">
                
                <!-- List Content -->
                <div class="relative flex-auto overflow-y-auto">
                <ng-container *ngIf="!isLoading && leasings.length > 0">
                    <ng-container *ngFor="let leasing of leasings; trackBy: trackByFn">
                        <!-- Leasing Row - Modern Design -->
                        <div class="leasing-list-item group relative px-6 py-5 md:px-8 border-b hover:shadow-md cursor-pointer transition-all duration-300"
                             (click)="viewLeasing(leasing.id)">
                            
                            <!-- Action Icons - Top Right -->
                            <div class="absolute top-4 right-4 z-10 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <button mat-icon-button 
                                        color="primary"
                                        class="bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all"
                                        [matTooltip]="'View Details'"
                                        (click)="viewLeasing(leasing.id); $event.stopPropagation()">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:eye'"></mat-icon>
                                </button>
                                <button *ngIf="canDeleteLeasing" 
                                        mat-icon-button 
                                        color="warn"
                                        class="bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all"
                                        [matTooltip]="'Delete'"
                                        (click)="deleteLeasing(leasing, $event)">
                                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                </button>
                            </div>

                            <div class="flex items-start gap-6">
                                <!-- Property Image with overlay -->
                                <div class="flex-shrink-0 relative">
                                    <div class="w-32 h-32 rounded-xl overflow-hidden bg-gray-200 dark:bg-gray-700 shadow-lg ring-2 ring-gray-100 dark:ring-gray-800 group-hover:ring-primary-500 transition-all duration-300">
                                        <img *ngIf="leasing.propertyImageUrl" 
                                             [src]="leasing.propertyImageUrl" 
                                             [alt]="leasing.propertyName"
                                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                                             (error)="$event.target.src='assets/images/placeholder-property.png'">
                                        <div *ngIf="!leasing.propertyImageUrl" 
                                             class="w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-500 via-primary-600 to-purple-600">
                                            <mat-icon class="icon-size-12 text-white opacity-90" [svgIcon]="'heroicons_outline:building-office'"></mat-icon>
                                        </div>
                                    </div>
                                    <!-- Status Badge on Image -->
                                    <div class="absolute -top-2 -right-2 z-10">
                                        <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold shadow-lg backdrop-blur-sm border-2 border-white dark:border-gray-900"
                                              [ngClass]="getStatusColorClass(leasing)">
                                            <span class="w-2 h-2 rounded-full mr-1.5 animate-pulse"
                                                  [ngClass]="getStatusText(leasing) === 'Active' ? 'bg-green-500' : getStatusText(leasing) === 'Expiring Soon' ? 'bg-amber-500' : 'bg-red-500'"></span>
                                            {{ getStatusText(leasing) }}
                                        </span>
                                    </div>
                                </div>

                                <!-- Main Content Area -->
                                <div class="flex-1 min-w-0 grid grid-cols-1 lg:grid-cols-12 gap-6">
                                    
                                    <!-- Property & Tenant Info - Col 1 -->
                                    <div class="lg:col-span-5 space-y-4">
                                        <!-- Property Name & Address -->
                                        <div>
                                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors line-clamp-1">
                                                {{ leasing.propertyName || 'N/A' }}
                                            </h3>
                                            <div class="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400">
                                                <mat-icon class="icon-size-4 text-gray-400" [svgIcon]="'heroicons_outline:map-pin'"></mat-icon>
                                                <span class="line-clamp-1">{{ leasing.propertyAddress || 'No address' }}</span>
                                            </div>
                                        </div>

                                        <!-- Tenant Info Card -->
                                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center flex-shrink-0 shadow-md">
                                                <mat-icon class="icon-size-5 text-white" [svgIcon]="'heroicons_outline:user'"></mat-icon>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-0.5">Tenant</p>
                                                <p class="text-sm font-semibold text-gray-900 dark:text-white truncate">{{ leasing.tenantName || 'N/A' }}</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400 truncate">{{ leasing.tenantEmail || '' }}</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Lease Period & Payment - Col 2 -->
                                    <div class="lg:col-span-4 space-y-3">
                                        <!-- Lease Period -->
                                        <div class="bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm">
                                            <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">Lease Period</p>
                                            <div class="space-y-2">
                                                <div class="flex items-center gap-2">
                                                    <div class="flex items-center justify-center w-8 h-8 rounded-lg bg-green-50 dark:bg-green-900/20">
                                                        <mat-icon class="icon-size-4 text-green-600 dark:text-green-400" [svgIcon]="'heroicons_outline:arrow-right-circle'"></mat-icon>
                                                    </div>
                                                    <div>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400">Start Date</p>
                                                        <p class="text-sm font-bold text-green-700 dark:text-green-300">{{ leasing.tenancyStart | date:'MMM dd, yyyy' }}</p>
                                                    </div>
                                                </div>
                                                <div class="flex items-center gap-2">
                                                    <div class="flex items-center justify-center w-8 h-8 rounded-lg bg-red-50 dark:bg-red-900/20">
                                                        <mat-icon class="icon-size-4 text-red-600 dark:text-red-400" [svgIcon]="'heroicons_outline:arrow-left-circle'"></mat-icon>
                                                    </div>
                                                    <div>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400">End Date</p>
                                                        <p class="text-sm font-bold text-red-700 dark:text-red-300">{{ leasing.tenancyEnd | date:'MMM dd, yyyy' }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Payment Type Badge -->
                                        <div class="flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800">
                                            <mat-icon class="icon-size-5 text-blue-600 dark:text-blue-400" [svgIcon]="'heroicons_outline:calendar-days'"></mat-icon>
                                            <span class="font-semibold text-sm text-blue-700 dark:text-blue-300">{{ getPaymentTypeLabel(leasing.paymentType) }}</span>
                                        </div>
                                    </div>

                                    <!-- Price - Col 3 -->
                                    <div class="lg:col-span-3 flex flex-col justify-center">
                                        <!-- Rent Price -->
                                        <div class="text-center lg:text-right">
                                            <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2">Monthly Rent</p>
                                            <div class="relative inline-block">
                                                <div class="absolute inset-0 bg-gradient-to-r from-primary-400 to-purple-600 rounded-2xl blur-lg opacity-30"></div>
                                                <div class="relative bg-gradient-to-br from-primary-500 to-purple-600 rounded-2xl px-6 py-4 shadow-xl">
                                                    <p class="text-3xl font-black text-white">{{ leasing.rentPrice | number:'1.0-0' }}</p>
                                                    <p class="text-sm font-semibold text-white/80">MAD</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- Hover Border Effect -->
                            <div class="absolute inset-0 rounded-lg border-2 border-transparent group-hover:border-primary-500 transition-all duration-300 pointer-events-none"></div>
                        </div>
                    </ng-container>
                </ng-container>

                <!-- No results -->
                <div *ngIf="!isLoading && leasings.length === 0" class="flex items-center justify-center h-full">
                    <app-no-data message="No leasings found! Start by creating a new lease"></app-no-data>
                </div>

                <!-- Loading -->
                <div *ngIf="isLoading" class="flex items-center justify-center h-full p-8 sm:p-16">
                    <div class="flex flex-col items-center">
                        <mat-icon class="icon-size-16 animate-spin" [svgIcon]="'heroicons_outline:arrow-path'"></mat-icon>
                        <div class="mt-4 text-secondary">Loading leasings...</div>
                </div>
            </div>
        </div>
    </div>

            <!-- Grid View -->
            <div *ngIf="viewMode === 'grid'" class="flex flex-col flex-auto overflow-hidden">
                
                <!-- Grid Content -->
                <div class="relative flex-auto overflow-y-auto p-6 md:p-8">
                
                <!-- Empty State -->
                <ng-container *ngIf="!isLoading && leasings.length === 0">
                        <div class="flex items-center justify-center h-full">
                            <app-no-data message="No leasings found! Start by creating a new lease"></app-no-data>
                    </div>
                </ng-container>

                    <!-- Grid - Modern Card Design -->
                    <ng-container *ngIf="!isLoading && leasings.length > 0">
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                        <div *ngFor="let leasing of leasings; trackBy: trackByFn"
                             class="leasing-card group relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden border-2 border-gray-100 dark:border-gray-700 hover:border-primary-400 dark:hover:border-primary-500 cursor-pointer"
                             (click)="viewLeasing(leasing.id)">
                            
                            <!-- Status Badge with Pulse -->
                            <div class="absolute top-4 right-4 z-20">
                                <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-bold backdrop-blur-md shadow-xl border-2 border-white dark:border-gray-900"
                                      [ngClass]="getStatusColorClass(leasing)">
                                    <span class="w-2 h-2 rounded-full mr-2 animate-pulse"
                                          [ngClass]="getStatusText(leasing) === 'Active' ? 'bg-green-600 shadow-green-600 shadow-lg' : getStatusText(leasing) === 'Expiring Soon' ? 'bg-amber-600 shadow-amber-600 shadow-lg' : 'bg-red-600 shadow-red-600 shadow-lg'"></span>
                                    {{ getStatusText(leasing) }}
                                </span>
                            </div>

                            <!-- Property Image with Gradient Overlay -->
                            <div class="relative h-56 bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 overflow-hidden">
                                <img *ngIf="leasing.propertyImageUrl" 
                                     [src]="leasing.propertyImageUrl" 
                                     [alt]="leasing.propertyName"
                                     class="w-full h-full object-cover group-hover:scale-110 group-hover:rotate-1 transition-all duration-700">
                                <div *ngIf="!leasing.propertyImageUrl" 
                                     class="w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-500 via-primary-600 to-purple-600">
                                    <mat-icon class="icon-size-24 text-white opacity-50" 
                                             [svgIcon]="'heroicons_outline:building-office'"></mat-icon>
                                </div>
                                <!-- Dark Overlay on Hover -->
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                
                                <!-- Quick Actions on Hover -->
                                <div class="absolute inset-0 flex items-center justify-center gap-3 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0">
                                    <button mat-fab color="primary" 
                                            class="shadow-2xl scale-90 group-hover:scale-100 transition-transform"
                                            (click)="viewLeasing(leasing.id); $event.stopPropagation()"
                                            [matTooltip]="'View Details'">
                                        <mat-icon [svgIcon]="'heroicons_outline:eye'"></mat-icon>
                                    </button>
                                    <button *ngIf="canDeleteLeasing" 
                                            mat-fab color="warn" 
                                            class="shadow-2xl scale-90 group-hover:scale-100 transition-transform"
                                            (click)="deleteLeasing(leasing, $event)"
                                            [matTooltip]="'Delete'">
                                        <mat-icon [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                    </button>
                                </div>
                            </div>

                            <!-- Card Content -->
                            <div class="p-6 space-y-4">
                                <!-- Property Name -->
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-1 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors">
                                        {{ leasing.propertyName || 'Unknown Property' }}
                                    </h3>
                                    
                                    <!-- Property Address -->
                                    <div class="flex items-start gap-2 text-sm text-gray-500 dark:text-gray-400">
                                        <mat-icon class="icon-size-4 mt-0.5 flex-shrink-0 text-primary-500" [svgIcon]="'heroicons_outline:map-pin'"></mat-icon>
                                        <span class="line-clamp-2">{{ leasing.propertyAddress || 'No address available' }}</span>
                                    </div>
                                </div>

                                <!-- Divider -->
                                <div class="h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-600 to-transparent"></div>

                                <!-- Tenant Info Card -->
                                <div class="flex items-center gap-3 p-3 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary-400 via-primary-500 to-primary-600 flex items-center justify-center flex-shrink-0 shadow-lg ring-2 ring-white dark:ring-gray-700">
                                        <mat-icon class="icon-size-6 text-white" 
                                                 [svgIcon]="'heroicons_outline:user'"></mat-icon>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-0.5">Tenant</p>
                                        <p class="text-sm font-bold text-gray-900 dark:text-white truncate">
                                            {{ leasing.tenantName || 'Unknown Tenant' }}
                                        </p>
                                    </div>
                                </div>

                                <!-- Payment Info Grid -->
                                <div class="grid grid-cols-2 gap-4">
                                    <!-- Rent Price -->
                                    <div class="relative overflow-hidden rounded-xl p-4 bg-gradient-to-br from-primary-500 to-primary-700 shadow-lg group/price">
                                        <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent opacity-0 group-hover/price:opacity-100 transition-opacity"></div>
                                        <p class="relative text-xs text-white/80 font-semibold uppercase tracking-wide mb-1">Monthly Rent</p>
                                        <p class="relative text-2xl font-black text-white">
                                            {{ leasing.rentPrice | number:'1.0-0' }}
                                        </p>
                                        <p class="relative text-sm font-bold text-white/90">MAD</p>
                                    </div>
                                    
                                    <!-- Payment Type -->
                                    <div class="rounded-xl p-4 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border border-blue-200 dark:border-blue-700 shadow-sm">
                                        <p class="text-xs text-blue-600 dark:text-blue-400 font-semibold uppercase tracking-wide mb-1">Payment</p>
                                        <div class="flex items-center gap-1.5">
                                            <mat-icon class="icon-size-5 text-blue-600 dark:text-blue-400" [svgIcon]="'heroicons_outline:calendar-days'"></mat-icon>
                                            <p class="text-sm font-bold text-blue-700 dark:text-blue-300 line-clamp-2">
                                                {{ getPaymentTypeLabel(leasing.paymentType) }}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Lease Period -->
                                <div class="bg-gradient-to-r from-gray-50 to-transparent dark:from-gray-900 dark:to-transparent rounded-xl p-3 border border-gray-200 dark:border-gray-700">
                                    <div class="flex items-center gap-2 text-xs">
                                        <mat-icon class="icon-size-4 text-gray-400" [svgIcon]="'heroicons_outline:calendar'"></mat-icon>
                                        <span class="font-semibold text-gray-600 dark:text-gray-400">
                                            {{ leasing.tenancyStart | date:'MMM dd, yyyy' }} 
                                            <span class="text-gray-400">→</span> 
                                            {{ leasing.tenancyEnd | date:'MMM dd, yyyy' }}
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Card Footer with Gradient -->
                            <div class="px-6 py-4 bg-gradient-to-r from-gray-50 via-gray-100 to-gray-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 border-t border-gray-200 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
                                        <mat-icon class="icon-size-4" [svgIcon]="'heroicons_outline:paper-clip'"></mat-icon>
                                        <span class="font-medium">{{ leasing.attachmentCount || 0 }} Document{{ (leasing.attachmentCount || 0) !== 1 ? 's' : '' }}</span>
                                    </div>
                                    <mat-icon class="icon-size-5 text-primary-500 group-hover:translate-x-1 transition-transform" 
                                             [svgIcon]="'heroicons_outline:arrow-right'"></mat-icon>
                                </div>
                            </div>

                            <!-- Hover Glow Effect -->
                            <div class="absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
                                 style="box-shadow: 0 0 30px rgba(var(--fuse-primary-rgb), 0.3);"></div>
                        </div>
                    </div>
                </ng-container>

                    <!-- Loading -->
                    <div *ngIf="isLoading" class="flex items-center justify-center h-full p-8 sm:p-16">
                        <div class="flex flex-col items-center">
                            <mat-icon class="icon-size-16 animate-spin text-primary-500" [svgIcon]="'heroicons_outline:arrow-path'"></mat-icon>
                            <div class="mt-4 text-lg font-semibold text-gray-600 dark:text-gray-400">Loading leasings...</div>
                        </div>
                    </div>
            </div>
        </div>

        <!-- Pagination -->
            <mat-paginator
                *ngIf="totalItems > 0"
                class="border-t flex-shrink-0"
                       [length]="totalItems"
                       [pageSize]="pageSize" 
                       [pageSizeOptions]="pageSizeOptions"
                [pageIndex]="currentPage - 1"
                       [showFirstLastButtons]="true" 
                       (page)="onPageChange($event)">
        </mat-paginator>

    </div>

    </div>
</div>
