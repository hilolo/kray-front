<!-- PDF Viewer Modal -->
<div class="pdf-viewer-overlay" *ngIf="isOpen" (click)="closeViewer()">
    <div class="pdf-viewer-modal" (click)="$event.stopPropagation()">
        <!-- Action Buttons -->
        <div class="action-buttons">
            <!-- Download Button -->
            <button 
                mat-icon-button 
                class="download-button"
                (click)="downloadPdf()"
                aria-label="Download PDF">
                <mat-icon>download</mat-icon>
            </button>
            
            <!-- Close Button -->
            <button 
                mat-icon-button 
                class="close-button"
                (click)="closeViewer()"
                aria-label="Close PDF viewer">
                <mat-icon>close</mat-icon>
            </button>
        </div>

        <!-- PDF Info -->
        <div class="pdf-info" *ngIf="pdfName || formattedFileSize">
            <div class="info-card">
                <div class="pdf-name" *ngIf="pdfName">{{ pdfName }}</div>
                <div class="file-size" *ngIf="formattedFileSize">{{ formattedFileSize }}</div>
            </div>
        </div>

        <!-- PDF Content -->
        <div class="pdf-content">
            <!-- Loading State -->
            <div *ngIf="isLoading" class="loading-container">
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading PDF...</div>
            </div>

            <!-- Error State -->
            <div *ngIf="loadError && !isLoading" class="error-container">
                <mat-icon class="error-icon">error_outline</mat-icon>
                <div class="error-text">Failed to load PDF</div>
                <button mat-stroked-button (click)="updatePdfUrl()" class="retry-button">
                    <mat-icon>refresh</mat-icon>
                    Retry
                </button>
            </div>

            <!-- PDF Iframe -->
            <iframe 
                *ngIf="safePdfUrl && !isLoading && !loadError"
                [src]="safePdfUrl" 
                class="pdf-iframe"
                frameborder="0"
                allowfullscreen
                type="application/pdf">
            </iframe>
        </div>
    </div>
</div>

