<main class="main">
  <div class="container">
    <div class="header">
      <h1>{{ title }}</h1>
      <p class="subtitle">Convert HTML to PDFMake format and generate PDFs - Angular implementation based on html-to-pdfmake</p>
    </div>

    <!-- HTML Input Section -->
    <div class="html-input-section">
      <div class="section-header">
        <h2>HTML Input</h2>
        <button class="btn btn-secondary" (click)="resetExample()">Reset Example</button>
      </div>
      <textarea 
        class="html-input" 
        [(ngModel)]="htmlInput"
        (ngModelChange)="onHtmlChange()"
        placeholder="Enter your HTML here..."
        rows="12"></textarea>
    </div>

    <!-- WYSIWYG Editor and PDF Preview Side by Side -->
    <div class="editor-container">
      <div class="editor-panel">
        <app-wysiwyg-editor 
          (htmlGenerated)="onHtmlFromWysiwyg($event)"
          (htmlChanged)="onHtmlFromWysiwyg($event)">
        </app-wysiwyg-editor>
      </div>

      <div class="preview-panel">
        <div class="section-header">
          <h2>PDF Preview</h2>
          <button class="btn btn-secondary" (click)="togglePdfPreview()">
            {{ showPdfPreview ? 'Hide' : 'Show' }} Preview
          </button>
        </div>
        <div class="pdf-preview-container" *ngIf="showPdfPreview">
          <div class="loading-overlay" *ngIf="isGeneratingPreview">
            <div class="spinner"></div>
            <p>Generating PDF...</p>
          </div>
          <iframe 
            *ngIf="pdfDataUrl && !isGeneratingPreview"
            [src]="pdfDataUrl | safe: 'resourceUrl'" 
            class="pdf-iframe"
            frameborder="0">
          </iframe>
        </div>
      </div>
    </div>

    <div class="content-section">
      <div class="button-group">
        <button class="btn btn-primary" (click)="convertHtml()">Show PDFMake JSON</button>
        <button class="btn btn-success" (click)="generatePdf()">Download PDF</button>
        <button class="btn btn-info" (click)="openPdfInNewTab()">Open PDF in New Tab</button>
      </div>

      <div class="output-section" *ngIf="showOutput">
        <div class="section-header">
          <h2>PDFMake JSON Definition</h2>
          <button class="btn btn-secondary" (click)="copyToClipboard()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            Copy JSON
          </button>
      </div>
        <pre class="pdfmake-output">{{ pdfMakeOutput }}</pre>
      </div>
    </div>

  </div>
</main>
