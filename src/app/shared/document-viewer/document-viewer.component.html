<!-- Document Viewer Modal -->
@if (isOpen()) {
  <div class="document-viewer-overlay" (click)="closeViewer()">
    <div class="document-viewer-modal" (click)="$event.stopPropagation()">
      <!-- Header -->
      <div class="viewer-header">
        <div class="header-content">
          <div class="title-section">
            <z-icon [zType]="documentIcon()" class="title-icon" />
            <div class="title-info">
              <h2 class="title">{{ displayName() }}</h2>
              @if (formattedFileSize()) {
                <div class="file-size">{{ formattedFileSize() }}</div>
              }
            </div>
          </div>
          <div class="action-buttons">
            <z-button
              zType="ghost"
              zSize="icon"
              class="download-button viewer-action-btn"
              (click)="downloadDocument()"
              [attr.aria-label]="'Download document'"
            >
              <z-icon zType="download" />
            </z-button>
            <z-button
              zType="ghost"
              zSize="icon"
              class="close-button viewer-action-btn"
              (click)="closeViewer()"
              [attr.aria-label]="'Close document viewer'"
            >
              <z-icon zType="x" />
            </z-button>
          </div>
        </div>
      </div>

      <!-- Document Content -->
      <div class="viewer-content">
        <div class="iframe-container">
          <iframe
            [src]="urlSafe()"
            frameborder="0"
            allowfullscreen
            class="document-iframe">
          </iframe>
        </div>
      </div>
    </div>
  </div>
}
